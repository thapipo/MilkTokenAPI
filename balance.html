<div id="vapp"></div>

<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>

<script>
    const vueApp = new Vue({
    el: '#vapp',
    template: `<div>
                    <section>
                        <header class="section-header">
                            <p>My Token Balance</p>
                        </header>
                   
                        <input type="text" v-model="wallet">
                        <button @click="getBalance">GO</button>
                        <div>
                            <div>
                                Total MILK balance :  <br/>
                                {{ balance }}
                            </div>

                            <div>
                                Total value in USDT :  <br/>
                                $ {{ total }} 
                            </div>
                        </div>
                    </section>
                </div>`,
    data: {
        wallet: "",
        balance: null,
        total: null
    },
    methods: {
        async getBalance() {
            try{
                let res = await axios.get(`https://api.milktoken.xyz/balance?wallet=${this.wallet}`);

                if(res.status === 200 && res.data.success){
                    this.balance = res.data.tokenBalance;
                    this.total = res.data.totalValue;
                }
            } catch (err){
                console.log("error getting balance");
            }
        }
    }
    });
</script>